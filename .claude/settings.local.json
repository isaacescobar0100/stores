{
  "permissions": {
    "allow": [
      "Bash(pip show:*)",
      "Bash(pyinstaller:*)",
      "Bash(del \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\fix_variantes.py\")",
      "Bash(python launcher.py:*)",
      "Bash(python:*)",
      "Bash(dir \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\*.exe\")",
      "Bash(dir:*)",
      "Bash(findstr:*)",
      "Bash(Select-Object FullName)",
      "Bash(copy:*)",
      "Bash(cmd /c copy \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\dist\\RestaurantOS.exe\" \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\apps\\RestaurantOS.exe\")",
      "Bash(cmd /c copy \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\dist\\RestaurantOS.exe\" \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\dist_cliente\\RestaurantOS.exe\")",
      "Bash(cmd /c dir \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\apps\\RestaurantOS.exe\")",
      "Bash(cmd /c \"dir c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\apps\\*.exe\")",
      "Bash(powershell:*)",
      "Bash(cmd /c \"del /q c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\dist\\*.exe 2>nul\")",
      "Bash(cmd /c \"del /q c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\apps\\*.exe 2>nul\")",
      "Bash(cmd /c \"del /q c:\\Users\\issac\\OneDrive\\Desktop\\rest\\dist_cliente\\*.exe 2>nul\")",
      "Bash(cmd /c \"rmdir /s /q c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\build 2>nul\")",
      "Bash(cmd /c copy:*)",
      "Bash(cmd /c \"dir c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\dist\\*.exe\")",
      "Bash(cmd /c \"if exist c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\dist\\VxPlay.exe echo EXISTE\")",
      "Bash(cmd /c \"del c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\dist\\RestaurantOS.exe\")",
      "Bash(cmd /c \"del c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\apps\\RestaurantOS.exe\")",
      "Bash(cmd /c \"del /f c:\\Users\\issac\\OneDrive\\Desktop\\rest\\dist_cliente\\RestaurantOS.exe\")",
      "Bash(cmd /c \"del /f c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\dist\\RestaurantOS.exe\")",
      "Bash(cmd /c \"del /f c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\apps\\RestaurantOS.exe\")",
      "Bash(start \"\" \"c:\\temp\\vxplay\\VxPlay.exe\")",
      "Bash(cmd /c \"cd /d c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher && pyinstaller --onefile --windowed --name VxPlay --distpath c:\\temp\\vxplay --workpath c:\\temp\\vxplay\\build --specpath c:\\temp\\vxplay launcher.py\")",
      "Bash(start \"\" \"C:\\Users\\issac\\AppData\\Local\\Temp\\VxPlay_v2.9.15.exe\")",
      "Bash(git restore:*)",
      "Bash(cmd /c \"cd /d c:\\Users\\issac\\OneDrive\\Desktop\\rest && python upload_and_restart.py\")",
      "Bash(cmd /c \"dir c:\\temp\\vxplay\\VxPlay.exe\")",
      "Bash(cmd /c \"if exist c:\\temp\\vxplay\\VxPlay.exe (echo EXISTE) else (echo NO EXISTE)\")",
      "Bash(cmd /c \"cd /d c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher && python -m PyInstaller --onefile --windowed --name VxPlay --distpath c:\\temp\\vxplay --workpath c:\\temp\\vxplay\\build --specpath c:\\temp\\vxplay launcher.py\")",
      "Bash(cmd /c \"cd /d c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher && python -m PyInstaller --onefile --windowed --name VxPlay_TEST --distpath c:\\temp\\vxplay --workpath c:\\temp\\vxplay\\build --specpath c:\\temp\\vxplay launcher.py\")",
      "Bash(start \"\" \"c:\\temp\\cliente_test\\VxPlay_v2.9.0.exe\")",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nv2.9.21 - Sistema auto-update VxPlay + reportes\n\n- Launcher VxPlay con sistema de auto-actualizacion automatico\n- Panel admin con seccion de reportes/exportar datos\n- Panel cocina mejorado con variantes de productos\n- API client con soporte para reportes\n- Script upload_and_restart.py para deploy automatizado\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git push:*)",
      "Bash(git commit:*)",
      "Bash(pip install:*)",
      "Bash(curl:*)",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Verificar donde esta el exe\nstdin, stdout, stderr = client.exec_command(''ls -la /var/www/restaurante/static/apps/'')\nprint(''=== /var/www/restaurante/static/apps/ ==='')\nprint(stdout.read().decode())\n\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-web-1 ls -la /app/static/apps/ 2>/dev/null || echo No existe'')\nprint(''=== Docker /app/static/apps/ ==='')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver config nginx para static\nstdin, stdout, stderr = client.exec_command(''grep -A5 \"\"location /static\"\" /etc/nginx/sites-available/vxplay'')\nprint(''=== Nginx static config ==='')\nprint(stdout.read().decode())\n\n# Probar acceso local\nstdin, stdout, stderr = client.exec_command(''curl -I http://localhost:5000/static/apps/VxPlay.exe 2>/dev/null | head -5'')\nprint(''=== Local access test ==='')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Reiniciar nginx para forzar nuevas conexiones\nstdin, stdout, stderr = client.exec_command(''nginx -s reload'')\nprint(''Nginx reloaded'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Copiar con nuevo nombre para bypass cache\nstdin, stdout, stderr = client.exec_command(''cp /var/www/restaurante/static/apps/VxPlay.exe /var/www/restaurante/static/apps/VxPlay_v2923.exe'')\nprint(''Archivo copiado'')\n\n# Actualizar version.json con nueva URL\nstdin, stdout, stderr = client.exec_command(''''''cat > /var/www/restaurante/static/apps/version.json << ''EOF''\n{\n    \"\"version\"\": \"\"2.9.23\"\",\n    \"\"release_date\"\": \"\"2025-12-16\"\",\n    \"\"changelog\"\": \"\"Galeria de productos\"\",\n    \"\"exe_url\"\": \"\"https://vxplay.online/static/apps/VxPlay_v2923.exe\"\"\n}\nEOF'''''')\nprint(''version.json actualizado'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver docker-compose\nstdin, stdout, stderr = client.exec_command(''cat /var/www/restaurante/docker-compose.yml | grep -A20 volumes'')\nprint(''=== Docker volumes ==='')\nprint(stdout.read().decode())\n\n# Verificar que nginx puede ver los archivos\nstdin, stdout, stderr = client.exec_command(''curl -v http://127.0.0.1:5000/static/apps/VxPlay_v2923.exe 2>&1 | head -20'')\nprint(''=== Curl verbose ==='')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver status de nginx\nstdin, stdout, stderr = client.exec_command(''systemctl status nginx | head -15'')\nprint(''=== Nginx status ==='')\nprint(stdout.read().decode())\n\n# Ver config completo de vxplay\nstdin, stdout, stderr = client.exec_command(''cat /etc/nginx/sites-available/vxplay'')\nprint(''=== Nginx vxplay config ==='')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver config completo de vxplay\nstdin, stdout, stderr = client.exec_command(''cat /etc/nginx/sites-available/vxplay'')\noutput = stdout.read().decode(''utf-8'', errors=''replace'')\nprint(output)\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Actualizar version.json con IP directa (temporal)\nstdin, stdout, stderr = client.exec_command(''''''cat > /var/www/restaurante/static/apps/version.json << ''EOF''\n{\n    \"\"version\"\": \"\"2.9.23\"\",\n    \"\"release_date\"\": \"\"2025-12-16\"\", \n    \"\"changelog\"\": \"\"Galeria de productos\"\",\n    \"\"exe_url\"\": \"\"https://72.61.72.32/static/apps/VxPlay.exe\"\"\n}\nEOF'''''')\nprint(''version.json actualizado con IP directa'')\n\nclient.close()\n\")",
      "Bash(start \"\" \"https://vxplay.online/superadmin/galeria-productos\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nstdin, stdout, stderr = client.exec_command(''''''cat > /var/www/restaurante/static/apps/version.json << ''EOF''\n{\n    \"\"version\"\": \"\"2.9.23\"\",\n    \"\"release_date\"\": \"\"2025-12-16\"\",\n    \"\"changelog\"\": \"\"Galeria de productos\"\",\n    \"\"exe_url\"\": \"\"https://vxplay.online/static/apps/VxPlay.exe\"\"\n}\nEOF'''''')\nprint(''version.json corregido con dominio vxplay.online'')\n\nclient.close()\n\")",
      "Bash(if not exist \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\dist_cliente\" mkdir \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\dist_cliente\")",
      "Bash(python -m PyInstaller:*)",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver ultimos productos y sus variantes\nstdin, stdout, stderr = client.exec_command(''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"\nSELECT p.id, p.nombre, p.precio, pv.id as var_id, pv.nombre as var_nombre, pv.precio as var_precio \nFROM productos p \nLEFT JOIN producto_variantes pv ON p.id = pv.producto_id \nORDER BY p.id DESC \nLIMIT 20;\"\" 2>&1'''''')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir models.py con los cambios de variantes\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\models.py'', ''/var/www/restaurante/models.py'')\nprint(''+ models.py'')\n\nsftp.close()\n\n# Reiniciar servidor\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Servidor reiniciado'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estado del container\nstdin, stdout, stderr = client.exec_command(''docker ps -a --filter name=restaurante-web-1 --format \"\"{{.Status}}\"\"'')\nprint(''Estado:'', stdout.read().decode())\n\n# Ver logs\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 30 2>&1'')\nprint(''Logs:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Probar una solicitud directa\nstdin, stdout, stderr = client.exec_command(''curl -s -w \"\"%{http_code}\"\" http://localhost:5000/ --max-time 10 2>&1 | tail -10'')\nprint(''Test localhost:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Probar con subdominio\nstdin, stdout, stderr = client.exec_command(''curl -s -w \"\"%{http_code}\"\" -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/mesero --max-time 10 2>&1 | tail -5'')\nprint(''Test elparche:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver errores recientes\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 50 2>&1 | grep -i \"\"error\\|traceback\\|exception\"\" -A 5'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir models.py optimizado\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\models.py'', ''/var/www/restaurante/models.py'')\nprint(''+ models.py subido'')\n\nsftp.close()\n\n# Reiniciar servidor\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Servidor reiniciado'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nimport time\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ntime.sleep(5)\n\n# Probar con subdominio\nstdin, stdout, stderr = client.exec_command(''curl -s -o /dev/null -w \"\"%{http_code}\"\" -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/mesero --max-time 15'')\ncode = stdout.read().decode()\nprint(f''HTTP Status: {code}'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir archivos modificados\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\models.py'', ''/var/www/restaurante/models.py'')\nprint(''+ models.py'')\n\nsftp.close()\n\n# Reiniciar servidor\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Servidor reiniciado'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nimport time\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ntime.sleep(5)\n\n# Verificar estado\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 15 2>&1'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver logs recientes con errores\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 50 2>&1 | grep -i -A 5 \"\"error\\|traceback\\|exception\"\"'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estructura de tabla ofertas\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"DESCRIBE ofertas;\"\"'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Modificar el ENUM para aceptar los nuevos tipos\nstdin, stdout, stderr = client.exec_command(''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"\nALTER TABLE ofertas MODIFY COLUMN tipo ENUM(''porcentaje'',''precio_fijo'',''combo'',''descuento'',''promocion'') NOT NULL;\n\"\"'''''')\nprint(''stdout:'', stdout.read().decode())\nprint(''stderr:'', stderr.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir template actualizado\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ templates/cliente/index.html'')\n\nsftp.close()\nclient.close()\nprint(''Archivos subidos'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ templates/cliente/index.html subido'')\nsftp.close()\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver ofertas en la base de datos\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, titulo, tipo, valor_descuento, productos_ids FROM ofertas LIMIT 5;\"\"'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ templates/cliente/index.html'')\nsftp.close()\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir archivos modificados\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ templates/cliente/index.html'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\models.py'', ''/var/www/restaurante/models.py'')\nprint(''+ models.py'')\n\nsftp.close()\n\n# Reiniciar servidor para aplicar cambios\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Servidor reiniciado'')\n\nclient.close()\nprint(''\\nTodo subido a produccion!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ templates/cliente/index.html subido'')\nsftp.close()\nclient.close()\nprint(''Listo!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver logs recientes con errores\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 50 2>&1 | grep -i -A 10 \"\"error\\|traceback\\|exception\"\"'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\app.py'', ''/var/www/restaurante/app.py'')\nprint(''+ app.py subido'')\nsftp.close()\n\n# Reiniciar servidor\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Servidor reiniciado'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver ofertas con sus productos\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, titulo, tipo, valor_descuento, productos_ids, precio_oferta FROM ofertas WHERE tienda_id=1;\"\"'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, titulo, tipo, valor_descuento, productos_ids, precio_oferta FROM ofertas WHERE tienda_id=1;\"\" 2>&1'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nstdin, stdout, stderr = client.exec_command(''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT * FROM ofertas LIMIT 5;\"\"'''''')\nout = stdout.read().decode()\nerr = stderr.read().decode()\nprint(''OUT:'', out)\nprint(''ERR:'', err)\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir archivos modificados\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\app.py'', ''/var/www/restaurante/app.py'')\nprint(''+ app.py'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ templates/cliente/index.html'')\n\nsftp.close()\n\n# Reiniciar servidor\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Servidor reiniciado'')\n\nclient.close()\nprint(''Listo!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ template subido'')\nsftp.close()\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Actualizar la oferta con el valor de descuento correcto\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"UPDATE ofertas SET valor_descuento = 10 WHERE id = 2 AND tipo = ''\\''''descuento''\\'''';\"\"'')\nprint(''OUT:'', stdout.read().decode())\nprint(''ERR:'', stderr.read().decode())\n\n# Verificar\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, titulo, tipo, valor_descuento FROM ofertas WHERE id = 2;\"\"'')\nprint(''Verificacion:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Actualizar la oferta\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"UPDATE ofertas SET valor_descuento = 10 WHERE id = 2;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''Update:'', stdout.read().decode(), stderr.read().decode())\n\n# Verificar\ncmd2 = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, titulo, tipo, valor_descuento FROM ofertas;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''Ofertas:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ template subido'')\nsftp.close()\nclient.close()\nprint(''Listo!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Probar con subdominio\nstdin, stdout, stderr = client.exec_command(''curl -s -o /dev/null -w \"\"%{http_code}\"\" -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/ --max-time 10'')\ncode = stdout.read().decode()\nprint(f''HTTP Status: {code}'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Reiniciar el servidor\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Reiniciado'')\n\nimport time\ntime.sleep(5)\n\n# Verificar\nstdin, stdout, stderr = client.exec_command(''docker ps --filter name=restaurante-web-1 --format \"\"{{.Status}}\"\"'')\nprint(''Estado:'', stdout.read().decode())\n\n# Test\nstdin, stdout, stderr = client.exec_command(''curl -s -o /dev/null -w \"\"%{http_code}\"\" http://localhost:5000/health --max-time 10'')\nprint(''Health check:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver los productos de la oferta\nstdin, stdout, stderr = client.exec_command(''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT o.id, o.productos_ids, p.id as prod_id, p.nombre FROM ofertas o LEFT JOIN productos p ON JSON_CONTAINS(o.productos_ids, CAST(p.id AS CHAR)) WHERE o.id = 2;\"\"'''''')\nprint(stdout.read().decode())\nprint(stderr.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Probar el endpoint del carrito\nstdin, stdout, stderr = client.exec_command(''curl -s -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/api/carrito --max-time 10'')\nprint(''Carrito response:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver precios de los productos\nstdin, stdout, stderr = client.exec_command(''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, nombre, precio FROM productos WHERE id IN (54, 58);\"\"'''''')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\mesero\\pedidos.html'', ''/var/www/restaurante/templates/mesero/pedidos.html'')\nprint(''+ templates/mesero/pedidos.html subido'')\nsftp.close()\nclient.close()\nprint(''Listo!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver que hay en el template\nstdin, stdout, stderr = client.exec_command(''grep -n \"\"oferta.tipo\"\" /var/www/restaurante/templates/mesero/pedidos.html | head -10'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver ofertas con su tipo\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, titulo, tipo, productos_ids FROM ofertas;\"\"'')\nprint(stdout.read().decode())\nprint(stderr.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver la seccion de ofertas del template\nstdin, stdout, stderr = client.exec_command(''sed -n \"\"509,540p\"\" /var/www/restaurante/templates/mesero/pedidos.html'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Probar request directo al mesero\nstdin, stdout, stderr = client.exec_command(''curl -s -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/mesero 2>&1 | grep -i \"\"10% de descuento\"\" -A 5 | head -20'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver logs\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 20 2>&1'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Reiniciar el servidor para forzar recarga de templates\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Servidor reiniciado!'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estado del container\nstdin, stdout, stderr = client.exec_command(''docker ps -a --filter name=restaurante-web-1 --format \"\"{{.Status}}\"\"'')\nprint(''Estado:'', stdout.read().decode())\n\n# Ver logs con errores\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 50 2>&1 | grep -i -A 5 \"\"error\\|traceback\\|exception\\|killed\\|oom\"\"'')\nprint(''Errores:'')\nprint(stdout.read().decode())\n\n# Ver memoria del sistema\nstdin, stdout, stderr = client.exec_command(''free -h'')\nprint(''Memoria:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver ultimos logs\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 100 2>&1'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nimport time\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Verificar estado actual\nstdin, stdout, stderr = client.exec_command(''docker ps --filter name=restaurante-web-1 --format \"\"{{.Status}}\"\"'')\nprint(''Estado actual:'', stdout.read().decode())\n\n# Test de conexiÃ³n\nstdin, stdout, stderr = client.exec_command(''curl -s -o /dev/null -w \"\"%{http_code}\"\" http://localhost:5000/health --max-time 5'')\nprint(''Health check:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nimport time\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver logs mas recientes para entender que pasa\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 30 2>&1'')\nprint(''Logs recientes:'')\nprint(stdout.read().decode())\n\n# Reiniciar\nprint(''\\nReiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\n\ntime.sleep(8)\n\n# Verificar\nstdin, stdout, stderr = client.exec_command(''docker ps --filter name=restaurante-web-1 --format \"\"{{.Status}}\"\"'')\nprint(''Estado:'', stdout.read().decode())\n\nstdin, stdout, stderr = client.exec_command(''curl -s -o /dev/null -w \"\"%{http_code}\"\" http://localhost:5000/health --max-time 10'')\nprint(''Health:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver productos con variantes\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT p.id, p.nombre, p.precio, pv.id as var_id, pv.nombre as var_nombre, pv.precio as var_precio FROM productos p LEFT JOIN producto_variantes pv ON p.id = pv.producto_id WHERE p.id IN (54, 58) ORDER BY p.id;\"\" 2>&1'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir archivos modificados\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\app.py'', ''/var/www/restaurante/app.py'')\nprint(''+ app.py'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\mesero\\pedidos.html'', ''/var/www/restaurante/templates/mesero/pedidos.html'')\nprint(''+ templates/mesero/pedidos.html'')\n\nsftp.close()\n\n# Reiniciar servidor para aplicar cambios\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Servidor reiniciado'')\n\nclient.close()\nprint(''\\nListo!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Probar el API de productos de oferta\nstdin, stdout, stderr = client.exec_command(''curl -s -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/api/oferta/2/productos'')\nprint(''API Response:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver si tiene la funcion de variantes\nstdin, stdout, stderr = client.exec_command(''grep -n \"\"tieneVariantes\"\" /var/www/restaurante/templates/mesero/pedidos.html | head -5'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Leer el archivo local en UTF-8 y subirlo\nlocal_path = r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\mesero\\pedidos.html''\nwith open(local_path, ''r'', encoding=''utf-8'') as f:\n    content = f.read()\n\n# Escribir en servidor\nremote_path = ''/var/www/restaurante/templates/mesero/pedidos.html''\nwith sftp.file(remote_path, ''w'') as f:\n    f.write(content)\n\nprint(''+ templates/mesero/pedidos.html (re-subido con UTF-8)'')\n\nsftp.close()\nclient.close()\nprint(''Listo!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver la parte del HTML que genera la tarjeta de oferta\nstdin, stdout, stderr = client.exec_command(''sed -n \"\"508,530p\"\" /var/www/restaurante/templates/mesero/pedidos.html'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Leer el archivo local en UTF-8 y subirlo\nlocal_path = r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\mesero\\pedidos.html''\nwith open(local_path, ''r'', encoding=''utf-8'') as f:\n    content = f.read()\n\n# Escribir en servidor\nremote_path = ''/var/www/restaurante/templates/mesero/pedidos.html''\nwith sftp.file(remote_path, ''w'') as f:\n    f.write(content)\n\nprint(''+ templates/mesero/pedidos.html'')\n\nsftp.close()\n\n# Reiniciar servidor\nprint(''Reiniciando servidor...'')\nstdin, stdout, stderr = client.exec_command(''docker restart restaurante-web-1'')\nstdout.read()\nprint(''Servidor reiniciado'')\n\nclient.close()\nprint(''Listo!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Verificar si el template tiene la funcion showVariantesModal\nstdin, stdout, stderr = client.exec_command(''grep -n \"\"showVariantesModal\"\" /var/www/restaurante/templates/mesero/pedidos.html | head -5'')\nprint(''showVariantesModal en servidor:'')\nprint(stdout.read().decode())\n\n# Ver si tiene la deteccion de variantes en producto\nstdin, stdout, stderr = client.exec_command(''grep -n \"\"producto.variantes\"\" /var/www/restaurante/templates/mesero/pedidos.html | head -5'')\nprint(''producto.variantes en servidor:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver productos con variantes de tienda 1 (elparche)\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT p.id, p.nombre, pv.id as var_id, pv.nombre as var_nombre, pv.precio FROM productos p INNER JOIN producto_variantes pv ON p.id = pv.producto_id WHERE p.tienda_id = 1 LIMIT 20;\"\" 2>&1'')\nprint(''Productos con variantes (tienda 1):'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver TODAS las variantes que existen\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT COUNT(*) as total FROM producto_variantes;\"\" 2>&1'')\nprint(''Total variantes:'')\nprint(stdout.read().decode())\n\n# Ver estructura de la tabla\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"DESCRIBE producto_variantes;\"\" 2>&1'')\nprint(''Estructura:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver las variantes con sus productos\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT pv.producto_id, p.nombre as producto, p.tienda_id, pv.nombre as variante, pv.precio FROM producto_variantes pv JOIN productos p ON pv.producto_id = p.id ORDER BY pv.producto_id;\"\" 2>&1'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver las variantes con sus productos\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT pv.producto_id, p.tienda_id, pv.nombre as variante, pv.precio FROM producto_variantes pv JOIN productos p ON pv.producto_id = p.id ORDER BY p.tienda_id, pv.producto_id;\"\" 2>&1'')\noutput = stdout.read()\nprint(output.decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver las tiendas\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, nombre, subdominio FROM tiendas;\"\" 2>&1'')\noutput = stdout.read()\nprint(output.decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Probar si el template ve variantes\nstdin, stdout, stderr = client.exec_command(''curl -s -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/mesero 2>&1 | grep -o \"\"showVariantesModal([^)]*\"\" | head -5'')\nprint(''Llamadas a showVariantesModal:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver si hay productos con variantes en la respuesta del mesero\nstdin, stdout, stderr = client.exec_command(''curl -s -H \"\"Host: elparche.vxplay.online\"\" \"\"http://localhost:5000/mesero\"\" --max-time 15 2>&1 | grep -o \"\"Desde\"\" | wc -l'')\nprint(''Cantidad de \"\"Desde\"\" en la pagina:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ejecutar prueba desde el servidor\ntest_code = ''''''\nimport sys\nsys.path.insert(0, \"\"/var/www/restaurante\"\")\nfrom models import Producto\nprods = Producto.obtener_por_tienda(3, solo_disponibles=True)\nfor p in prods[:5]:\n    print(f\"\"Producto {p[''id'']}: {p[''nombre'']} - variantes: {len(p.get(''variantes'', []))}\"\")\n''''''\n\nstdin, stdout, stderr = client.exec_command(f''docker exec restaurante-web-1 python3 -c \"\"{test_code}\"\"'')\nprint(''stdout:'', stdout.read().decode(''latin-1''))\nprint(''stderr:'', stderr.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Crear script de test\nsftp = client.open_sftp()\nwith sftp.file(''/tmp/test_var.py'', ''w'') as f:\n    f.write(''''''\nimport sys\nsys.path.insert(0, \"\"/var/www/restaurante\"\")\nfrom models import Producto\nprods = Producto.obtener_por_tienda(3, solo_disponibles=True)\nfor p in prods[:5]:\n    nombre = p.get(\"\"nombre\"\", \"\"?\"\")\n    vars_count = len(p.get(\"\"variantes\"\", []))\n    print(f\"\"Producto {p[''id'']}: {nombre} - variantes: {vars_count}\"\")\n'''''')\nsftp.close()\n\n# Ejecutar\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-web-1 python3 /tmp/test_var.py'')\nprint(''stdout:'', stdout.read().decode(''latin-1''))\nprint(''stderr:'', stderr.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Crear script dentro del container\ncmd = ''''''cat > /var/www/restaurante/test_var.py << ''PYEOF''\nimport sys\nsys.path.insert(0, \"\"/var/www/restaurante\"\")\nfrom models import Producto\nprods = Producto.obtener_por_tienda(3, solo_disponibles=True)\nfor p in prods[:5]:\n    nombre = p.get(\"\"nombre\"\", \"\"?\"\")\n    vars_count = len(p.get(\"\"variantes\"\", []))\n    print(\"\"Producto %s: %s - variantes: %d\"\" % (p[\"\"id\"\"], nombre, vars_count))\nPYEOF''''''\nstdin, stdout, stderr = client.exec_command(f''docker exec restaurante-web-1 bash -c \\''{cmd}\\'''')\nstdout.read()\n\n# Ejecutar\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-web-1 python3 /var/www/restaurante/test_var.py'')\nprint(''stdout:'', stdout.read().decode(''latin-1''))\nprint(''stderr:'', stderr.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Primero verificar un producto directamente en la DB\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, nombre FROM productos WHERE tienda_id = 3 AND id IN (52, 53, 54) ORDER BY id;\"\"'')\nprint(''Productos 52-54:'')\nprint(stdout.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver la funcion obtener_por_tienda en el servidor\nstdin, stdout, stderr = client.exec_command(''sed -n \"\"1001,1055p\"\" /var/www/restaurante/models.py'')\nprint(stdout.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Verificar los logs de errores del servidor\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 30 2>&1'')\nprint(stdout.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver si los productos con variantes estan disponibles y en que categorias\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT p.id, p.nombre, p.disponible, c.nombre as categoria FROM productos p LEFT JOIN categorias c ON p.categoria_id = c.id WHERE p.id IN (52, 53, 54, 55, 56, 57, 58, 59, 60, 61);\"\"'')\nprint(''Productos con variantes y sus categorias:'')\nprint(stdout.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver categorias de tienda 3\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, nombre, padre_id FROM categorias WHERE tienda_id = 3 ORDER BY padre_id, id;\"\"'')\nprint(''Categorias tienda 3:'')\nprint(stdout.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver la parte del template donde itera productos con subcategorias\nstdin, stdout, stderr = client.exec_command(''sed -n \"\"545,600p\"\" /var/www/restaurante/templates/mesero/pedidos.html'')\nprint(stdout.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Buscar un producto especifico en el HTML generado (Granizado)\nstdin, stdout, stderr = client.exec_command(''curl -s -b \"\"session=test\"\" -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/mesero --max-time 30 2>&1 | grep -o \"\"onclick=.addToCart.52[^>]*\"\" | head -3'')\nprint(''Granizado (52) con addToCart:'')\nprint(stdout.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Buscar cualquier Granizado en el HTML\nstdin, stdout, stderr = client.exec_command(''curl -s -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/mesero --max-time 30 2>&1 | grep -i \"\"Granizado\"\" | head -5'')\nprint(''Buscando Granizado:'')\nprint(stdout.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver el HTTP status y headers\nstdin, stdout, stderr = client.exec_command(''curl -s -I -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/mesero --max-time 10'')\nprint(''Headers:'')\nprint(stdout.read().decode(''latin-1''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver el HTTP status y headers\nstdin, stdout, stderr = client.exec_command(''curl -s -w \"\"HTTP %{http_code}\"\" -o /dev/null -H \"\"Host: elparche.vxplay.online\"\" http://localhost:5000/mesero --max-time 15'')\nprint(''Status:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estado del servidor\nstdin, stdout, stderr = client.exec_command(''docker ps --filter name=restaurante-web-1 --format \"\"{{.Status}}\"\"'')\nprint(''Estado:'', stdout.read().decode())\n\n# Probar health check\nstdin, stdout, stderr = client.exec_command(''curl -s -w \"\" (HTTP %{http_code})\"\" http://localhost:5000/health --max-time 5'')\nprint(''Health:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(cat:*)",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\admin_cloud.py'', ''/var/www/restaurante/static/launcher/admin_cloud.py'')\nprint(''+ admin_cloud.py subido'')\nsftp.close()\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver datos de ofertas en la BD\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && python3 -c \"\"from models import Database; db = Database(); print(db.execute(\\\"\"SELECT id, titulo, tipo, valor_descuento, descuento FROM ofertas LIMIT 5\\\"\"))\"\"'')\nprint(stdout.read().decode())\nprint(stderr.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ejecutar dentro del container\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-web-1 python3 -c \"\"from models import Database; db = Database(); rows = db.execute(\\\"\"SELECT id, titulo, valor_descuento FROM ofertas\\\"\"); print(rows)\"\"'')\nprint(stdout.read().decode())\nerr = stderr.read().decode()\nif err:\n    print(''ERROR:'', err)\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ncmd = ''''''docker exec restaurante-web-1 python3 << ''PYEOF''\nfrom models import Database\ndb = Database()\nrows = db.execute(\"\"SELECT id, titulo, valor_descuento FROM ofertas\"\")\nfor r in rows:\n    print(r)\nPYEOF''''''\n\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(stdout.read().decode())\nerr = stderr.read().decode()\nif err:\n    print(''ERR:'', err)\n\nclient.close()\n\")",
      "Bash(python -m json.tool:*)",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\models.py'', ''/var/www/restaurante/models.py'')\nprint(''+ models.py subido'')\nsftp.close()\n\n# Reiniciar el contenedor\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(stdout.read().decode())\nprint(''Reiniciando...'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\models.py'', ''/var/www/restaurante/models.py'')\nprint(''+ models.py subido'')\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\app.py'', ''/var/www/restaurante/app.py'')\nprint(''+ app.py subido'')\nsftp.close()\n\n# Reiniciar\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(stdout.read().decode())\nprint(''Reiniciando...'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver logs recientes\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 30 2>&1'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\app.py'', ''/var/www/restaurante/app.py'')\nprint(''+ app.py subido'')\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ncmd = ''''''docker exec restaurante-db-1 mysql -u root -proot_password restaurantes -e \"\"SELECT id, tienda_id, nombre, email, rol, activo FROM usuarios;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(stdout.read().decode())\nprint(stderr.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver containers\nstdin, stdout, stderr = client.exec_command(''docker ps --format \"\"{{.Names}}\"\"'')\nprint(''Containers:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ncmd = ''''''docker exec restaurante-mysql mysql -u root -proot_password restaurantes -e \"\"SELECT id, tienda_id, nombre, email, rol, activo FROM usuarios;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(stdout.read().decode())\nerr = stderr.read().decode()\nif ''Warning'' not in err:\n    print(err)\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ncmd = ''''''docker exec restaurante-mysql mysql -u root -proot_password restaurantes -N -e \"\"SELECT id, tienda_id, nombre, rol, activo FROM usuarios;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nout = stdout.read().decode()\nerr = stderr.read().decode()\nprint(''Usuarios:'')\nprint(out if out else ''Sin resultados'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ncmd = ''''''docker exec restaurante-mysql mysql -u root -proot_password restaurantes -e \"\"SHOW TABLES LIKE ''usuarios'';\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''Tables:'', stdout.read().decode())\n\ncmd2 = ''''''docker exec restaurante-mysql mysql -u root -proot_password restaurantes -e \"\"SELECT * FROM usuarios LIMIT 5;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''Data:'', stdout.read().decode())\nprint(stderr.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Buscar el password de MySQL\nstdin, stdout, stderr = client.exec_command(''cat /var/www/restaurante/docker-compose.yml | grep -A5 mysql'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, tienda_id, nombre, rol, activo FROM usuarios;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nout = stdout.read().decode()\nerr = stderr.read().decode()\nprint(''Usuarios:'')\nprint(out if out else ''Sin resultados'')\nif ''Error'' in err or ''ERROR'' in err:\n    print(err)\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver logs para ver la tienda\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 10 2>&1 | grep -i tienda'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 30 2>&1'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose up -d --force-recreate web'')\nprint(stdout.read().decode())\nprint(stderr.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\models.py'', ''/var/www/restaurante/models.py'')\nprint(''+ models.py'')\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\app.py'', ''/var/www/restaurante/app.py'')\nprint(''+ app.py'')\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose up -d --force-recreate web'')\nprint(stderr.read().decode())\nprint(''Reiniciando...'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT p.id, p.mesero_id, u.nombre as mesero, p.total, p.estado, DATE(p.fecha_pedido) as fecha FROM pedidos p LEFT JOIN usuarios u ON p.mesero_id = u.id WHERE p.tienda_id = 3 ORDER BY p.fecha_pedido DESC LIMIT 15;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\models.py'', ''/var/www/restaurante/models.py'')\nprint(''+ models.py'')\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\app.py'', ''/var/www/restaurante/app.py'')\nprint(''+ app.py'')\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose up -d --force-recreate web'')\nprint(stderr.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 20 2>&1 | grep -i mesero'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 50 2>&1 | grep -A5 -i error'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\models.py'', ''/var/www/restaurante/models.py'')\nprint(''+ models.py'')\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estructura de detalle_pedidos\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"DESCRIBE detalle_pedidos;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''Estructura detalle_pedidos:'')\nprint(stdout.read().decode())\n\n# Ver Ãºltimos detalles\ncmd2 = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT * FROM detalle_pedidos ORDER BY id DESC LIMIT 5;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''Ãšltimos detalles:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\mesero\\pedidos.html'', ''/var/www/restaurante/templates/mesero/pedidos.html'')\nprint(''+ pedidos.html'')\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver los Ãºltimos detalles de pedido con notas\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT dp.id, dp.pedido_id, p.nombre as producto, dp.precio_unitario, dp.notas FROM detalle_pedidos dp JOIN productos p ON dp.producto_id = p.id ORDER BY dp.id DESC LIMIT 10;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT dp.id, dp.pedido_id, dp.producto_id, dp.precio_unitario, dp.notas FROM detalle_pedidos dp ORDER BY dp.id DESC LIMIT 10;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nout = stdout.read()\nprint(out.decode(''utf-8'', errors=''replace''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Verificar si el cÃ³digo tiene ''item.variante''\ncmd = ''''''grep -n ''item.variante'' /var/www/restaurante/templates/mesero/pedidos.html''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''item.variante en servidor:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Verificar funciÃ³n agregarConVariante\ncmd = ''''''grep -A2 ''function agregarConVariante'' /var/www/restaurante/templates/mesero/pedidos.html''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''agregarConVariante:'')\nprint(stdout.read().decode())\n\n# Verificar funciÃ³n addToCart\ncmd2 = ''''''grep -A3 ''function addToCart'' /var/www/restaurante/templates/mesero/pedidos.html''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''addToCart:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver el onclick de variantes\ncmd = ''''''grep -o \"\"agregarConVariante[^)]*\"\" /var/www/restaurante/templates/mesero/pedidos.html | head -3''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''agregarConVariante calls:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\ncmd = ''''''grep -n ''console.log'' /var/www/restaurante/templates/mesero/pedidos.html''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\mesero\\pedidos.html'', ''/var/www/restaurante/templates/mesero/pedidos.html'')\nprint(''+ pedidos.html v3'')\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estado\nstdin, stdout, stderr = client.exec_command(''docker ps -a --format \"\"{{.Names}} {{.Status}}\"\"'')\nprint(''Estado:'')\nprint(stdout.read().decode())\n\n# Ver logs de error\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 20 2>&1'')\nprint(''Logs:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose up -d --force-recreate web'')\nprint(stderr.read().decode())\nprint(''Reiniciado!'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver los detalles del pedido mÃ¡s reciente\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -N -e \"\"SELECT dp.id, dp.pedido_id, dp.producto_id, dp.precio_unitario, dp.notas FROM detalle_pedidos dp WHERE dp.pedido_id >= 17 ORDER BY dp.id DESC;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nout = stdout.read()\nprint(''Detalles recientes:'')\nprint(out.decode(''utf-8'', errors=''replace''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver la primera lÃ­nea del template en el servidor\ncmd = ''''''head -1 /var/www/restaurante/templates/mesero/pedidos.html''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''Version en servidor:'', stdout.read().decode())\n\n# Ver si addToCart tiene el parÃ¡metro variante\ncmd2 = ''''''grep -A1 ''function addToCart'' /var/www/restaurante/templates/mesero/pedidos.html | head -2''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''addToCart:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Reiniciar completamente\nstdin, stdout, stderr = client.exec_command(''docker stop restaurante-web-1 && docker rm restaurante-web-1'')\nprint(stdout.read().decode())\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose up -d web'')\nprint(stderr.read().decode())\nprint(''Container recreado!'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir mesero/pedidos.html\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\mesero\\pedidos.html'', ''/var/www/restaurante/templates/mesero/pedidos.html'')\nprint(''+ mesero/pedidos.html (v4 - ofertas variantes fix)'')\n\n# Subir cliente/index.html\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ cliente/index.html (variantes modal)'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estado\nstdin, stdout, stderr = client.exec_command(''docker ps -a --format \"\"{{.Names}} {{.Status}}\"\"'')\nprint(''Estado:'')\nprint(stdout.read().decode())\n\n# Ver logs de error\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 30 2>&1'')\nprint(''Logs:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir app.py\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\app.py'', ''/var/www/restaurante/app.py'')\nprint(''+ app.py (fix variantes carrito)'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estado\nstdin, stdout, stderr = client.exec_command(''docker ps -a --format \"\"{{.Names}} {{.Status}}\"\"'')\nprint(''Estado:'')\nprint(stdout.read().decode())\n\n# Ver logs de error\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 40 2>&1 | grep -i -A2 error'')\nprint(''Errores:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Forzar recrear container\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose up -d --force-recreate web'')\nprint(stderr.read().decode())\nprint(''Reiniciado!'')\n\n# Ver estado despuÃ©s\nimport time\ntime.sleep(5)\nstdin, stdout, stderr = client.exec_command(''docker ps --format \"\"{{.Names}} {{.Status}}\"\" | grep web'')\nprint(''Estado:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir cliente/index.html\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ cliente/index.html (ocultar botones ofertas en modo mesero)'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\superadmin\\tiendas.html'', ''/var/www/restaurante/templates/superadmin/tiendas.html'')\nprint(''+ tiendas.html (banner upload restored)'')\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\js\\tiendas_fix.js'', ''/var/www/restaurante/static/js/tiendas_fix.js'')\nprint(''+ tiendas_fix.js (v20251217 - banner field fix)'')\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver cÃ³mo se incluye el JS en tiendas.html\ncmd = ''''''grep -n ''tiendas_fix'' /var/www/restaurante/templates/superadmin/tiendas.html''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''tiendas_fix en template:'')\nprint(stdout.read().decode())\n\n# Ver versiÃ³n del JS en servidor\ncmd2 = ''''''head -5 /var/www/restaurante/static/js/tiendas_fix.js''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''Version en servidor:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Buscar script tags en tiendas.html\ncmd = ''''''grep -n ''<script'' /var/www/restaurante/templates/superadmin/tiendas.html | tail -10''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''Scripts en tiendas.html:'')\nprint(stdout.read().decode())\n\n# Ver el base.html de superadmin\ncmd2 = ''''''grep -n ''tiendas_fix\\|script.*js'' /var/www/restaurante/templates/superadmin/base.html''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''Scripts en base.html superadmin:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Actualizar versiÃ³n de cache-busting en base.html\ncmd = ''''''sed -i ''s/tiendas_fix.js?v=20251213/tiendas_fix.js?v=20251217/g'' /var/www/restaurante/templates/superadmin/base.html''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''Actualizado cache-busting'')\n\n# Verificar\ncmd2 = ''''''grep ''tiendas_fix'' /var/www/restaurante/templates/superadmin/base.html''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''VerificaciÃ³n:'', stdout.read().decode())\n\n# Reiniciar\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir tiendas.html\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\superadmin\\tiendas.html'', ''/var/www/restaurante/templates/superadmin/tiendas.html'')\nprint(''+ tiendas.html (banner_url fix)'')\n\n# Subir tiendas_fix.js\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\js\\tiendas_fix.js'', ''/var/www/restaurante/static/js/tiendas_fix.js'')\nprint(''+ tiendas_fix.js (banner_url fix)'')\n\n# Subir base.html\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\superadmin\\base.html'', ''/var/www/restaurante/templates/superadmin/base.html'')\nprint(''+ base.html (cache-busting v20251217)'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estado\nstdin, stdout, stderr = client.exec_command(''docker ps -a --format \"\"{{.Names}} {{.Status}}\"\"'')\nprint(''Estado:'')\nprint(stdout.read().decode())\n\n# Ver logs de error\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 30 2>&1 | grep -i error'')\nprint(''Errores:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Forzar recrear\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose up -d --force-recreate web'')\nprint(stderr.read().decode())\nprint(''Reiniciado!'')\n\nimport time\ntime.sleep(5)\n\n# Ver estado despuÃ©s\nstdin, stdout, stderr = client.exec_command(''docker ps --format \"\"{{.Names}} {{.Status}}\"\" | grep web'')\nprint(''Estado:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir cliente/index.html\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ cliente/index.html (banner display)'')\n\n# Subir cliente.css\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\css\\cliente.css'', ''/var/www/restaurante/static/css/cliente.css'')\nprint(''+ cliente.css (banner styles)'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir cliente/index.html\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ cliente/index.html (banner como hero)'')\n\n# Subir cliente.css\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\css\\cliente.css'', ''/var/www/restaurante/static/css/cliente.css'')\nprint(''+ cliente.css (hero-banner styles)'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir cliente/index.html\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ cliente/index.html (banner como fondo con info)'')\n\n# Subir cliente.css\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\css\\cliente.css'', ''/var/www/restaurante/static/css/cliente.css'')\nprint(''+ cliente.css (hero-with-banner styles)'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir cliente/index.html con cache-busting\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ cliente/index.html (CSS cache-busting v20251217)'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir ambos archivos para asegurar sincronizaciÃ³n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ cliente/index.html (v20251217b)'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\css\\cliente.css'', ''/var/www/restaurante/static/css/cliente.css'')\nprint(''+ cliente.css'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver estado\nstdin, stdout, stderr = client.exec_command(''docker ps -a --format \"\"{{.Names}} {{.Status}}\"\"'')\nprint(''Estado:'')\nprint(stdout.read().decode())\n\n# Ver logs de error\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 50 2>&1'')\nprint(''Logs:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Forzar recrear container completo\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose up -d --force-recreate web'')\nprint(stderr.read().decode())\nprint(''Container recreado!'')\n\nimport time\ntime.sleep(5)\n\n# Ver estado despuÃ©s\nstdin, stdout, stderr = client.exec_command(''docker ps --format \"\"{{.Names}} {{.Status}}\"\" | grep web'')\nprint(''Estado:'', stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir cliente/index.html\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\templates\\cliente\\index.html'', ''/var/www/restaurante/templates/cliente/index.html'')\nprint(''+ cliente/index.html'')\n\n# Subir cliente.css\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\css\\cliente.css'', ''/var/www/restaurante/static/css/cliente.css'')\nprint(''+ cliente.css'')\n\nsftp.close()\n\n# Forzar recrear container\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose up -d --force-recreate web'')\nprint(stderr.read().decode())\nprint(''Container recreado!'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir archivos del launcher\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\version.json'', ''/var/www/restaurante/static/launcher/version.json'')\nprint(''+ version.json (v2.8.4)'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\admin_cloud.py'', ''/var/www/restaurante/static/launcher/admin_cloud.py'')\nprint(''+ admin_cloud.py'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\api_client.py'', ''/var/www/restaurante/static/launcher/api_client.py'')\nprint(''+ api_client.py'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\launcher.py'', ''/var/www/restaurante/static/launcher/launcher.py'')\nprint(''+ launcher.py'')\n\nsftp.close()\n\nstdin, stdout, stderr = client.exec_command(''cd /var/www/restaurante && docker compose restart web'')\nprint(''Reiniciando...'')\n\nclient.close()\nprint(''Done! Launcher v2.8.4 subido'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver logs recientes\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 30 2>&1 | grep -i -E \"\"error|categoria|cat\"\"'')\nprint(''Logs:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver categorÃ­as asignadas a tienda 3 (El Parche)\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -N -e \"\"SELECT t.id, t.nombre, COUNT(tc.categoria_id) as cats FROM tiendas t LEFT JOIN tienda_categorias tc ON t.id = tc.tienda_id GROUP BY t.id;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''Tiendas y categorÃ­as asignadas:'')\nprint(stdout.read().decode())\n\n# Ver las categorÃ­as de una tienda especÃ­fica\ncmd2 = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -N -e \"\"SELECT tc.tienda_id, cm.nombre FROM tienda_categorias tc JOIN categorias_maestras cm ON tc.categoria_id = cm.id WHERE tc.tienda_id = 3;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''CategorÃ­as de tienda 3:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver productos de la tienda 3 (El Parche)\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT p.id, p.nombre, c.nombre as categoria FROM productos p LEFT JOIN categorias c ON p.categoria_id = c.id WHERE p.tienda_id = 3 LIMIT 10;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nprint(''Productos tienda 3:'')\nprint(stdout.read().decode())\n\n# Ver categorÃ­as de tienda 3\ncmd2 = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -e \"\"SELECT id, nombre FROM categorias WHERE tienda_id = 3;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nprint(''Categorias tienda 3:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver productos de la tienda 3 (El Parche)\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -N -e \"\"SELECT p.id, c.nombre as categoria FROM productos p LEFT JOIN categorias c ON p.categoria_id = c.id WHERE p.tienda_id = 3 LIMIT 10;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nout = stdout.read()\nprint(''Productos tienda 3:'')\nprint(out.decode(''utf-8'', errors=''replace''))\n\n# Ver categorÃ­as de tienda 3\ncmd2 = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -N -e \"\"SELECT id, nombre FROM categorias WHERE tienda_id = 3;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nout2 = stdout.read()\nprint(''Categorias tienda 3:'')\nprint(out2.decode(''utf-8'', errors=''replace''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver todas las tiendas\ncmd = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -N -e \"\"SELECT id, nombre, subdominio FROM tiendas;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd)\nout = stdout.read()\nprint(''Tiendas:'')\nprint(out.decode(''utf-8'', errors=''replace''))\n\n# Contar productos por tienda\ncmd2 = ''''''docker exec restaurante-mysql mysql -u restaurante -prestaurante_pass_2024 restaurantes -N -e \"\"SELECT t.nombre, COUNT(p.id) as productos FROM tiendas t LEFT JOIN productos p ON t.id = p.tienda_id GROUP BY t.id;\"\"''''''\nstdin, stdout, stderr = client.exec_command(cmd2)\nout2 = stdout.read()\nprint(''Productos por tienda:'')\nprint(out2.decode(''utf-8'', errors=''replace''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver logs recientes\nstdin, stdout, stderr = client.exec_command(''docker logs restaurante-web-1 --tail 50 2>&1'')\nout = stdout.read()\nprint(out.decode(''utf-8'', errors=''replace''))\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir archivos del launcher\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\version.json'', ''/var/www/restaurante/static/launcher/version.json'')\nprint(''+ version.json (v2.8.4)'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\admin_cloud.py'', ''/var/www/restaurante/static/launcher/admin_cloud.py'')\nprint(''+ admin_cloud.py'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\api_client.py'', ''/var/www/restaurante/static/launcher/api_client.py'')\nprint(''+ api_client.py'')\n\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\launcher.py'', ''/var/www/restaurante/static/launcher/launcher.py'')\nprint(''+ launcher.py'')\n\nsftp.close()\n\nprint(''Launcher v2.8.4 subido - los clientes recibirÃ¡n la actualizaciÃ³n!'')\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver version.json en el servidor\nstdin, stdout, stderr = client.exec_command(''cat /var/www/restaurante/static/launcher/version.json'')\nprint(''version.json en servidor:'')\nprint(stdout.read().decode())\n\n# Ver si existe version.txt\nstdin, stdout, stderr = client.exec_command(''cat /var/www/restaurante/static/launcher/version.txt 2>/dev/null || echo \"\"No existe version.txt\"\"'')\nprint(''version.txt:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir version.txt\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\version.txt'', ''/var/www/restaurante/static/launcher/version.txt'')\nprint(''+ version.txt (v2.9.4)'')\n\nsftp.close()\n\n# Verificar\nstdin, stdout, stderr = client.exec_command(''cat /var/www/restaurante/static/launcher/version.txt'')\nprint(''Verificando:'', stdout.read().decode())\n\nclient.close()\nprint(''Done!'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver si existe /var/www/restaurante/static/apps/\nstdin, stdout, stderr = client.exec_command(''ls -la /var/www/restaurante/static/apps/ 2>/dev/null || echo \"\"No existe\"\"'')\nprint(''static/apps en restaurante:'')\nprint(stdout.read().decode())\n\n# Ver si hay otro directorio web para vxplay.online\nstdin, stdout, stderr = client.exec_command(''ls -la /var/www/ 2>/dev/null'')\nprint(''Directorios en /var/www/:'')\nprint(stdout.read().decode())\n\n# Ver configuraciÃ³n nginx para vxplay.online\nstdin, stdout, stderr = client.exec_command(''grep -r \"\"vxplay.online\"\" /etc/nginx/sites-enabled/ 2>/dev/null | head -20'')\nprint(''Config nginx vxplay.online:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver contenido de version.json en static/apps\nstdin, stdout, stderr = client.exec_command(''cat /var/www/restaurante/static/apps/version.json'')\nprint(''version.json en static/apps:'')\nprint(stdout.read().decode())\n\n# Ver el nginx config del container\nstdin, stdout, stderr = client.exec_command(''docker exec restaurante-web-1 cat /etc/nginx/nginx.conf 2>/dev/null | head -50'')\nprint(''nginx config:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir version.json a static/apps (donde el launcher lo busca)\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\apps\\version.json'', ''/var/www/restaurante/static/apps/version.json'')\nprint(''+ version.json subido a /static/apps/ (v2.9.24)'')\n\nsftp.close()\n\n# Verificar\nstdin, stdout, stderr = client.exec_command(''cat /var/www/restaurante/static/apps/version.json'')\nprint(''Verificando contenido:'')\nprint(stdout.read().decode())\n\nclient.close()\nprint(''Done! Ahora el launcher detectarÃ¡ la actualizaciÃ³n a v2.9.24'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\nsftp = client.open_sftp()\n\n# Subir version.json corregido\nsftp.put(r''c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\apps\\version.json'', ''/var/www/restaurante/static/apps/version.json'')\nprint(''+ version.json (v1.0.2)'')\n\nsftp.close()\n\n# Verificar\nstdin, stdout, stderr = client.exec_command(''cat /var/www/restaurante/static/apps/version.json'')\nprint(''Verificando:'')\nprint(stdout.read().decode())\n\nclient.close()\nprint(''Listo! Cliente 1.0.1 -> detectarÃ¡ actualizaciÃ³n a 1.0.2'')\n\")",
      "Bash(python -c \"\nimport paramiko\nimport os\nfrom dotenv import load_dotenv\nload_dotenv(''c:/Users/issac/OneDrive/Desktop/rest/.env'')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(''72.61.72.32'', username=''root'', password=os.getenv(''DEPLOY_PASSWORD''))\n\n# Ver archivos en static/apps con detalles\nstdin, stdout, stderr = client.exec_command(''ls -la /var/www/restaurante/static/apps/'')\nprint(''Archivos en /static/apps/:'')\nprint(stdout.read().decode())\n\n# Ver fecha de modificaciÃ³n del VxPlay.exe\nstdin, stdout, stderr = client.exec_command(''stat /var/www/restaurante/static/apps/VxPlay.exe'')\nprint(''Detalles VxPlay.exe:'')\nprint(stdout.read().decode())\n\nclient.close()\n\")",
      "Bash(dir /s /b \"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\*.exe\")",
      "Bash(dir /s /b \"c:\\Users\\issac\\*.exe\")",
      "Bash(mkdir:*)",
      "Bash(cmd /c \"mkdir \"\"c:\\Users\\issac\\OneDrive\\Desktop\\rest\\dist_cliente\"\" 2>nul\")",
      "Bash(cmd /c \"mkdir c:\\Users\\issac\\OneDrive\\Desktop\\rest\\dist_cliente 2>nul\")",
      "Bash(cmd /c \"copy c:\\Users\\issac\\OneDrive\\Desktop\\rest\\static\\launcher\\dist\\VxPlay.exe c:\\Users\\issac\\OneDrive\\Desktop\\rest\\dist_cliente\\VxPlay.exe\")",
      "Bash(cmd /c:*)",
      "Bash(powershell -Command:*)",
      "Bash(ssh:*)",
      "Bash(nslookup:*)",
      "Bash(scp:*)",
      "Bash(python3:*)",
      "Bash(taskkill:*)",
      "Bash(tasklist /FI \"IMAGENAME eq VxPlay.exe\" /V)",
      "Bash(git checkout:*)"
    ]
  }
}
